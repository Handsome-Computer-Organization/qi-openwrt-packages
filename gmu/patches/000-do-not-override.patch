--- gmu-0.7.0.orig/nanonote.mk	2010-03-25 19:32:41.000000000 +0100
+++ gmu-0.7.0/nanonote.mk	2010-04-01 21:36:10.000000000 +0200
@@ -19,13 +19,6 @@
 FRONTENDS_TO_BUILD=frontends/sdl.so frontends/log.so
 DEVICE=NANONOTE
 CONFIG=-D_$(DEVICE)
-SDL_LIB=-lSDL -lpthread -ldirectfb -ldirect -lfusion -lz -lSDL_image -lSDL_gfx
-SDL_CFLAGS=-D_GNU_SOURCE=1 -D_REENTRANT
-CXX=mipsel-openwrt-linux-g++
-CC=mipsel-openwrt-linux-gcc
-STRIP=mipsel-openwrt-linux-strip
-TOOLCHAIN_ROOT_PATH=$(shell which $(CC)|sed 's/toolchain-mipsel_gcc-4.3.3+cs_uClibc-0.9.30.1\/usr\/bin\/$(CC)//')
-COPTS?=-O2 -s
-CFLAGS=-msoft-float -I$(TOOLCHAIN_ROOT_PATH)/target-mipsel_uClibc-0.9.30.1/usr/include/SDL -I$(TOOLCHAIN_ROOT_PATH)/target-mipsel_uClibc-0.9.30.1/usr/include -ffast-math -fomit-frame-pointer $(SDL_CFLAGS) $(CONFIG)
+CFLAGS+=$(CONFIG)
-LFLAGS=-s $(SDL_LIB) -L$(TOOLCHAIN_ROOT_PATH)/target-mipsel_uClibc-0.9.30.1/usr/lib -L$(TOOLCHAIN_ROOT_PATH)/target-mipsel_uClibc-0.9.30.1/root-xburst/usr/lib -lpthread -lm -ldl -lgcc -Wl,-export-dynamic
+LFLAGS=$(LDFLAGS) -lSDL -lpthread -ldirectfb -ldirect -lfusion -lz -lSDL_image -lSDL_gfx -lm -ldl -lgcc -Wl,-export-dynamic
 DISTFILES=$(BINARY) frontends decoders themes gmu.png README.txt libs.nanonote gmu.nn COPYING gmuinput.nanonote.conf
